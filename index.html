<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>HALAL ROULETTE</title>

<style>
body { font-family: Arial; padding:28px; background:#0b1220; color:#e7eefc; overflow-x:hidden;}
.card { background:#111a2e; border-radius:14px; padding:16px; max-width:850px; margin:auto; }

h1 { font-size:28px; }

.row { display:flex; gap:12px; flex-wrap:wrap; margin:10px 0; }

input { padding:10px; border-radius:10px; background:#1b2640; color:white; border:1px solid #333; }

select {
padding:10px;
border-radius:10px;
background:white;
color:black;
}

button {
padding:10px 14px;
border-radius:12px;
border:none;
cursor:pointer;
background:linear-gradient(180deg,#3b82f6 0%, #2563eb 100%);
color:white;
font-weight:700;
}

button.secondary {
background:#1b2640;
border:1px solid #333;
}

#result { font-size:60px; margin:20px 0; font-weight:800; text-align:center; }
.red { color:#ff4d4d; }
.black { color:#ffffff; }

.pill {
padding:8px 12px;
border-radius:999px;
background:#1b2640;
}

.leaderboard, .stats, .roll-history {
margin-top:20px;
padding:12px;
background:#0e172a;
border-radius:12px;
}

.leaderboard-entry {
display:flex;
justify-content:space-between;
padding:4px 0;
}

.roll-item {
display:inline-block;
margin:4px;
padding:6px 10px;
border-radius:8px;
font-weight:bold;
}

.roll-item.red { background:#ff4d4d; }
.roll-item.black { background:#333; }

.sparkle {
position:fixed;
width:8px;
height:8px;
background:gold;
border-radius:50%;
pointer-events:none;
animation:fly 1s ease-out forwards;
}

@keyframes fly {
0% { transform:translate(0,0) scale(1); opacity:1; }
100% { transform:translate(var(--x), var(--y)) scale(0.5); opacity:0; }
}
</style>
</head>

<body>
<div class="card">

<h1>HALAL ROULETTE</h1>

<div class="row">
<div class="pill">Balance: $<span id="balance">100</span></div>
<div class="pill">Last payout: $<span id="payout">0</span></div>
</div>

<div class="row">
<input id="bet" type="number" placeholder="Bet amount">

<select id="guessColor">
<option value="">Color</option>
<option value="red">Red</option>
<option value="black">Black</option>
</select>

<select id="guessParity">
<option value="">Odd/Even</option>
<option value="odd">Odd</option>
<option value="even">Even</option>
</select>
</div>

<div class="row">
<button id="play">Play</button>
<button id="cashout" class="secondary">Cash Out</button>
<button id="reset" class="secondary">Reset</button>
</div>

<div id="result">‚Äî</div>
<div id="message"></div>

<div class="stats">
<h3>üìä Stats</h3>
<div>Total Spins: <span id="totalSpins">0</span></div>
<div>Total Wins: <span id="totalWins">0</span></div>
<div>Win Rate: <span id="winRate">0%</span></div>
</div>

<div class="roll-history">
<h3>üé≤ Last 10 Rolls</h3>
<div id="lastRolls"></div>
</div>

<div class="leaderboard">
<h3>üèÜ Leaderboard</h3>
<div id="leaderboardList"></div>
</div>

</div>

<script>
const slots = Array.from({length:36},(_,i)=>(i+1).toString());

const redSet=new Set(["1","3","5","7","9","12","14","16","18","19","21","23","25","27","30","32","34","36"]);

function getColor(slot){ return redSet.has(slot)?"red":"black"; }
function pickRandomSlot(){ return slots[Math.floor(Math.random()*slots.length)]; }
function getParity(slot){ return Number(slot)%2===0?"even":"odd"; }

let balance=100;
let totalSpins=0;
let totalWins=0;
let lastTen=[];

const balanceEl=document.getElementById("balance");
const payoutEl=document.getElementById("payout");
const resultEl=document.getElementById("result");
const msgEl=document.getElementById("message");

function updateStats(){
document.getElementById("totalSpins").textContent=totalSpins;
document.getElementById("totalWins").textContent=totalWins;
let rate=totalSpins?((totalWins/totalSpins)*100).toFixed(1):0;
document.getElementById("winRate").textContent=rate+"%";
}

function updateRollHistory(){
const container=document.getElementById("lastRolls");
container.innerHTML="";
lastTen.slice(-10).reverse().forEach(r=>{
const div=document.createElement("div");
div.className="roll-item "+r.color;
div.textContent=r.number;
container.appendChild(div);
});
}

function sparkleExplosion(){
for(let i=0;i<40;i++){
const s=document.createElement("div");
s.className="sparkle";
const angle=Math.random()*2*Math.PI;
const distance=300+Math.random()*200;
const x=Math.cos(angle)*distance+"px";
const y=Math.sin(angle)*distance+"px";
s.style.left="50%";
s.style.top="50%";
s.style.setProperty("--x",x);
s.style.setProperty("--y",y);
document.body.appendChild(s);
setTimeout(()=>s.remove(),1000);
}
}

function spin(){
const bet=Number(document.getElementById("bet").value);
const guessColor=document.getElementById("guessColor").value;
const guessParity=document.getElementById("guessParity").value;

if(!bet||bet<=0||bet>balance){ msgEl.textContent="Invalid bet"; return;}
if(!guessColor&&!guessParity){ msgEl.textContent="Pick a guess"; return;}

balance-=bet;
totalSpins++;

const slot=pickRandomSlot();
const color=getColor(slot);
const parity=getParity(slot);

let payout=0;

if(guessColor&&guessParity){
if(guessColor===color&&guessParity===parity){ payout=bet*4; }
}else{
if(guessColor===color||guessParity===parity){ payout=bet*2; }
}

if(payout>0){
balance+=payout;
totalWins++;
sparkleExplosion();
}

payoutEl.textContent=payout;
balanceEl.textContent=balance;

resultEl.textContent=slot;
resultEl.className=color;

msgEl.textContent=payout>0?"You won $"+payout:"You lost $"+bet;

lastTen.push({number:slot,color:color});
if(lastTen.length>10) lastTen.shift();

updateStats();
updateRollHistory();
}

function getLeaderboard(){ return JSON.parse(localStorage.getItem("rouletteLeaderboard")||"[]"); }
function saveLeaderboard(d){ localStorage.setItem("rouletteLeaderboard",JSON.stringify(d)); }

function renderLeaderboard(){
const list=document.getElementById("leaderboardList");
list.innerHTML="";
getLeaderboard().sort((a,b)=>b.score-a.score).forEach(e=>{
const div=document.createElement("div");
div.className="leaderboard-entry";
div.innerHTML=`<span>${e.name}</span><span>$${e.score}</span>`;
list.appendChild(div);
});
}

function cashOut(){
if(balance<=0){ msgEl.textContent="No money to cash out"; return;}
const name=prompt("Enter name for leaderboard:");
if(!name) return;
const data=getLeaderboard();
data.push({name:name,score:balance});
saveLeaderboard(data);
renderLeaderboard();
msgEl.textContent=name+" cashed out with $"+balance;
balance=0;
balanceEl.textContent=balance;
}

document.getElementById("play").addEventListener("click",spin);
document.getElementById("cashout").addEventListener("click",cashOut);
document.getElementById("reset").addEventListener("click",()=>{
balance=100;
totalSpins=0;
totalWins=0;
lastTen=[];
updateStats();
updateRollHistory();
balanceEl.textContent=balance;
payoutEl.textContent=0;
resultEl.textContent="‚Äî";
msgEl.textContent="Game reset";
});

updateStats();
updateRollHistory();
renderLeaderboard();
</script>
</body>
</html>
